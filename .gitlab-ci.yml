image: google/dart:latest

before_script:
  - export PATH="$PATH":"~/.pub-cache/bin"
  - pub get --no-precompile

compile:
  script:
    - dart2native ./bin/create.dart --output ./executables/create.exe
    - git add ./executables/create.exe
    - git config user.email 'victor.divi@upc.edu'
    - git config user.name 'Gitlab CI'
    - git commit -m "Update compiled executable"
    - git push origin develop
  only:
    changes:
      - bin/create.dart